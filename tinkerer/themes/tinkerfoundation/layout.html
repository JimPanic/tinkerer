{#
myfoundation/layout.html
~~~~~~~~~~~~~~~~~

Master layout template for Sphinx themes that uses foundation css
http://foundation.zurb.com/
#}

{%- block doctype -%}
<!DOCTYPE html>
{%- endblock %}

{%- set reldelim1 = reldelim1 is not defined and ' &raquo;' or reldelim1 %}
{%- set reldelim2 = reldelim2 is not defined and ' |' or reldelim2 %}
{%- set render_sidebar = (not embedded) and (not theme_nosidebar|tobool) and

(sidebars != []) %}

{%- set url_root = pathto('', 1) %}

{# XXX necessary? #}
{%- if url_root == '#' %}
{% set url_root = '' %}
{% endif %}

{%- if not embedded and docstitle %}
{%- set titlesuffix = " &mdash; "|safe + docstitle|e %}
{%- else %}
{%- set titlesuffix = "" %}
{%- endif %}

{%- macro relbar() %}
<div class="related">
  <h3>{{ _('Navigation') }}</h3>
  <ul>
    {%- for rellink in rellinks %}
    <li class="right" {% if loop.first %}style="margin-right: 10px"{% endif %}>
      <a href="{{ pathto(rellink[0]) }}" title="{{ rellink[1]|striptags|e }}"
	 {{ accesskey(rellink[2]) }}>{{ rellink[3] }}</a>
    {%- if not loop.first %}{{ reldelim2 }}{% endif %}</li>
    {%- endfor %}
    {%- block rootrellink %}
    <li><a href="{{ pathto(master_doc) }}">{{ shorttitle|e }}</a>{{ reldelim1 }}</li>
    {%- endblock %}
    {%- for parent in parents %}
    <li><a href="{{ parent.link|e }}" {% if loop.last %}{{ accesskey("U") }}{% endif %}>{{ parent.title }}</a>{{ reldelim1 }}</li>
    {%- endfor %}
    {%- block relbaritems %} {% endblock %}
  </ul>
</div>
{%- endmacro %}

{%- macro sidebar() %}
{%- if render_sidebar %}
<div class="sphinxsidebar">
  <div class="sphinxsidebarwrapper">
    {%- block sidebarlogo %}
    {%- if logo %}
    <p class="logo"><a href="{{ pathto(master_doc) }}">
      <img class="logo" src="{{ pathto('_static/' + logo, 1) }}" alt="Logo"/>
    </a></p>
    {%- endif %}
    {%- endblock %}
    {%- if sidebars != None %}
    {#- new style sidebar: explicitly include/exclude templates #}
    {%- for sidebartemplate in sidebars %}
    {%- include sidebartemplate %}
    {%- endfor %}
    {%- else %}
    {#- old style sidebars: using blocks -- should be deprecated #}
    {%- block sidebartoc %}
    {%- include "localtoc.html" %}
    {%- endblock %}
    {%- block sidebarrel %}
    {%- include "relations.html" %}
    {%- endblock %}
    {%- block sidebarsourcelink %}
    {%- include "sourcelink.html" %}
    {%- endblock %}
    {%- if customsidebar %}
    {%- include customsidebar %}
    {%- endif %}
    {%- block sidebarsearch %}
    {%- include "searchbox.html" %}
    {%- endblock %}
    {%- endif %}
  </div>
</div>
{%- endif %}
{%- endmacro %}

{%- macro script() %}
<script type="text/javascript">
  var DOCUMENTATION_OPTIONS = {
  URL_ROOT:    '{{ url_root }}',
  VERSION:     '{{ release|e }}',
  COLLAPSE_INDEX: false,
  FILE_SUFFIX: '{{ '' if no_search_suffix else file_suffix }}',
  HAS_SOURCE:  {{ has_source|lower }}
  };
</script>

{%- for scriptfile in script_files %}
<script type="text/javascript" src="{{ pathto(scriptfile, 1) }}"></script>
{%- endfor %}
{%- endmacro %}

{%- macro css() %}
<link rel="stylesheet" href="{{ pathto('_static/' + style, 1) }}" type="text/css" />
<link rel="stylesheet" href="{{ pathto('_static/pygments.css', 1) }}" type="text/css" />
{%- for cssfile in css_files %}
<link rel="stylesheet" href="{{ pathto(cssfile, 1) }}" type="text/css" />
{%- endfor %}
{%- endmacro %}

<!--tinkerer macros-->
{# Prev/next nav ------------------------------------------------------------ #}

{# characters displayed before/after prev/next links #}
{%- set prevchar = prevchar is not defined and ' &laquo; ' or prevchar %}
{%- set nextchar = nextchar is not defined and ' &raquo; ' or nextchar %}

{# character displyed before and after "Blog Archive" #}
{%- set archivechar = archivechar is not defined and ' &mdash; ' or archivechar %}

{# Page nav ----------------------------------------------------------------- #}

{# page_nav before or after header (default after) #}
{%- set page_nav_first = page_nav_first is defined %}

{# RSS feed ----------------------------------------------------------------- #}

{# RSS feed link #}
{%- if rss_service %}
    {%- set rss_feed_link = rss_service %}
{%- else %}
    {%- set rss_feed_link = pathto('rss') %}
{%- endif %}        

{# include RSS feed link in page_nav (default True) #}
{%- set rss_in_page_nav = rss_in_page_nav is not defined or rss_in_page_nav %}

{# RSS link text (default None) #}
{%- set rss_link_text = rss_link_text is not defined and None or rss_link_text %}

{# RSS symbol in link (default True) #}
{%- set rss_symbol = rss_symbol is not defined or rss_symbol %}

{# Timestamp format --------------------------------------------------------- #}

{# Timestamp format #}
{%- set timestamp_format = timestamp_format is not defined and 
    '<span class="month">%B</span> <span class="day">%d</span>, <span class="year">%Y</day>' 
    or timestamp_format %}
{%- set timestamp_short_format = timestamp_short_format is not defined and 
    '<span class="month">%b</span> <span class="day">%d</span>' or timestamp_short_format %}

{# Macros ------------------------------------------------------------------- #}

{# Blog header #}
{%- macro blog_header() %}
    <div class="header">
        <h1 class="heading">
            <a href="{{ pathto(pages[0][0]) }}">
                <span>{{ shorttitle|e }}</span>
            </a>
        </h1>
        <h2 class="tagline">{{ tagline }}</h2>
    </div>
{%- endmacro %}

{# RSS nav #}
{%- macro rss_nav() %}
    <a href="{{ rss_feed_link }}" title="Subscribe via RSS">
        <div class="rss">
            {%- if rss_symbol %}<span class="webfont">B</span>{%- endif %}
            {% if rss_link_text %}{{ rss_link_text }}{% endif %}
        </div>
    </a>
{%- endmacro %}
 
{# List of blog pages #}
{%- macro page_nav() %}
    <div class="page_nav">
        <ul class="nav-bar">
            {% for page in pages %}
            <li>
                <a href="{{ pathto(page[0]) }}">{{ page[1] }}</a>
            </li>
            {% endfor %}
        </ul>
    </div>
{%- endmacro %}


{# Navigation #}
{%- macro tinkerer_relbar() %}
    {%- if prev or next %}
    <div class="related">
        <ul>
            {%- if prev %}
            <li>
                {{ prevchar }}<a href="{{ prev.link|e }}">{{ prev.title }}</a>
            </li>
            {%- endif %}
            {%- if next %}
            <li class="right">
                <a href="{{ next.link|e }}">{{ next.title }}</a>{{ nextchar }}
            </li>
            {%- endif %}
        </ul>
    </div>
    {%- endif %}
{%- endmacro %}

{# Timestamp #}
{%- macro timestamp(date, fmt) %}
    {%- if date %}
        <div class="timestamp postmeta">
            <span>{{ date.strftime(fmt) }}</span> 
        </div>
    {%- endif %}
{%- endmacro %}

{# Author #}
{%- macro author(author_name) %}
    {%- if author_name %}
        <div class="author">
            <span>{{ text_posted_by }} {{ author_name }}</span>
        </div>
    {%- endif %}
{%- endmacro %}

{# Categories #}
{%- macro category_list(post_categories) %}
    {%- if post_categories %}
        <div class="categories">
            <span>
                {{ text_filed_under }}:
                {% for link, category in post_categories %}
                    <a href="{{ pathto('categories/' + link + '.html', 1) }}">{{ category }}</a>
                    {%- if not loop.last %}, {%- endif %}
                {% endfor %}
            </span>
        </div>
    {%- endif %}
{%- endmacro %}    

{# Tags #}
{%- macro tag_list(post_tags) %}
    {%- if post_tags %}
        <div class="tags">
            <span>
                {{ text_tags }}:
                {% for link, tag in post_tags %}
                    <a href="{{ pathto('tags/' + link + '.html', 1) }}">{{ tag }}</a>
                    {%- if not loop.last %}, {%- endif %}
                {% endfor %}
            </span>
        </div>
    {%- endif %}
{%- endmacro %}

{# Comment count #}
{%- macro comment_count(code) %}
    {%- if code %}
        <div class="comments">
            {{ code }}
        </div>
    {%- endif %}
{%- endmacro %}

{# Post metadata #}
{%- macro post_meta(metadata, comment_count_code=None) %}
    <div class="postmeta">
        {{ author(metadata.author) }}
        {{ category_list(metadata.filing["categories"]) }}
        {{ tag_list(metadata.filing["tags"]) }}
        {{ comment_count(comment_count_code) }}
    </div>
{%- endmacro %}

<!-- paulirish.com/2008/conditional-stylesheets-vs-css-hacks-answer-neither/ -->
<!--[if lt IE 7]> <html class="no-js lt-ie9 lt-ie8 lt-ie7" lang="en"> <![endif]-->
<!--[if IE 7]>    <html class="no-js lt-ie9 lt-ie8" lang="en"> <![endif]-->
<!--[if IE 8]>    <html class="no-js lt-ie9" lang="en"> <![endif]-->
<!--[if gt IE 8]><!--> <html lang="en"> <!--<![endif]-->
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset={{ encoding }}" />
    <!-- Set the viewport width to device width for mobile -->
    <meta name="viewport" content="width=device-width" />

    {{ metatags }}
    {%- block htmltitle %}
    <title>{{ title|striptags|e }}{{ titlesuffix }}</title>
    {%- endblock %}
    
    <!-- Included CSS Files -->
    <link rel="stylesheet" href="{{pathto('_static/foundation/stylesheets/foundation.css', 1)}}">
      <link rel="stylesheet" href="{{pathto('_static/foundation/stylesheets/app.css', 1)}}">
	
	<!--[if lt IE 9]>
	    <link rel="stylesheet" href="{{pathto('_static/foundation/stylesheets/ie.css', 1)}}">
	    <![endif]-->


	<!-- IE Fix for HTML5 Tags -->
	<!--[if lt IE 9]>
	    <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
	    <![endif]-->
	{{ css() }}
	{%- if not embedded %}
	{{ script() }}
	{%- if use_opensearch %}
	<link rel="search" type="application/opensearchdescription+xml"
	      title="{% trans docstitle=docstitle|e %}Search within {{ docstitle }}{% endtrans %}"
	      href="{{ pathto('_static/opensearch.xml', 1) }}"/>
	{%- endif %}
	{%- if favicon %}
	<link rel="shortcut icon" href="{{ pathto('_static/' + favicon, 1) }}"/>
	{%- endif %}
	{%- endif %}

	{%- block linktags %}
	{%- if hasdoc('about') %}
	<link rel="author" title="{{ _('About these documents') }}" href="{{ pathto('about') }}" />
	{%- endif %}
	{%- if hasdoc('genindex') %}
	<link rel="index" title="{{ _('Index') }}" href="{{ pathto('genindex') }}" />
	{%- endif %}
	{%- if hasdoc('search') %}
	<link rel="search" title="{{ _('Search') }}" href="{{ pathto('search') }}" />
	{%- endif %}
	{%- if hasdoc('copyright') %}
	<link rel="copyright" title="{{ _('Copyright') }}" href="{{ pathto('copyright') }}" />
	{%- endif %}
	<link rel="top" title="{{ docstitle|e }}" href="{{ pathto('index') }}" />
	{%- if parents %}
	<link rel="up" title="{{ parents[-1].title|striptags|e }}" href="{{ parents[-1].link|e }}" />
	{%- endif %}
	{%- if next %}
	<link rel="next" title="{{ next.title|striptags|e }}" href="{{ next.link|e }}" />
	{%- endif %}
	{%- if prev %}
	<link rel="prev" title="{{ prev.title|striptags|e }}" href="{{ prev.link|e }}" />
	{%- endif %}
	<link rel="alternate" type="application/rss+xml" title="RSS" href="{{ rss_feed_link }}">
	{%- endblock %}
	{%- block extrahead %} {% endblock %}
      </head>
      <body>
	<div class="container">
	  <div class="row header">
	    <div class="twelve columns">
	      {%- block header %}
	      {%- if page_nav_first %}{{ page_nav() }}{%- endif %}
	      {{ blog_header() }}
	      {%- if not page_nav_first%}{{ page_nav() }}{%- endif %}
	      {%- if rss_in_page_nav %}
	      <ul class="sub-nav right">
		<li>
		  {{ rss_nav() }}
		</li>
	      </ul>
	      {%- endif %}

	      {%- endblock %}
	    </div>
	  </div>
	  <div class="row content">
	    <div class="nine columns main">
	      {%- block content %}
	      <div class="document body">
		{%- block document %}
		{% block body %} 
		{% endblock %}
		{%- endblock %}
	      </div>
	      {%- endblock %}
	    </div>
	    <div class="three columns supplement">
	      <div class="panel">
	      {%- block relbar1 %}{%- endblock %}
	      {% block sidebar1 %}{{ sidebar() }}{% endblock %}
	      {% block sidebar2 %}{% endblock %}
	      {%- block relbar2 %}{%- endblock %}
	      </div>
	    </div>
	  </div>

	  <div class="row footer">
	    <div class="twelve columns">
	      {%- block footer %}
		{# Comment plug-in can initialize here #}
		{%- if comment_enabler %}{{ comment_enabler }}{%- endif %}
		{%- endblock %}

	      {%- if show_copyright %}
	      {%- if hasdoc('copyright') %}
	      {% trans path=pathto('copyright'), copyright=copyright|e %}&copy; <a href="{{ path }}">Copyright</a> {{ copyright }}.{% endtrans %}
	      {%- else %}
	      {% trans copyright=copyright|e %}&copy; Copyright {{ copyright }}.{% endtrans %}
	      {%- endif %}
	      {%- endif %}
	      {%- if last_updated %}
	      {% trans last_updated=last_updated|e %}Last updated on {{ last_updated }}.{% endtrans %}
	      {%- endif %}
	      {%- if not show_sphinx %}
	      Powered by <a href="http://www.tinkerer.me/">Tinkerer</a> and <a href="http://sphinx.pocoo.org/">Sphinx</a>.
	      {%- endif %}

	    </div>
	  </div>
	</div><!--container-->
	<!-- Included JS Files -->
	<!-- <script src="{{pathto('_static/foundation/javascripts/jquery.min.js', 1)}}"></script> -->
	<script src="{{pathto('_static/foundation/javascripts/modernizr.foundation.js', 1)}}"></script>
	<script src="{{pathto('_static/foundation/javascripts/foundation.js', 1)}}"></script>
	<script src="{{pathto('_static/foundation/javascripts/app.js', 1)}}"></script>
   </body>
</html>